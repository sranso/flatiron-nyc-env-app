<h1>Filter Results Results</h1>
<div id="map-canvas"></div>
<script type="text/javascript">

  //initialize map
  var map;
  function initialize() {
    var mapOptions = {
      zoom: 10,
      center: new google.maps.LatLng(40.6700, -73.9400)
    };

    // create that map
    map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

    // set content of pop-up box
    var contentString = '<div id="content">' +
        '<div id="siteNotice">' +
        '</div>' +
        '<h1 id="firstHeading" class="firstHeading">' +
        // placeName +
        '</h1>' +
        '<div id="bodyContent">' +
        '<p><b>' +
        // placeStreet + placeStreet2 +
        '</b>, also referred to as...</p>' +
        '<p><a href="#">yes, this is a link</a></p>' +
        '</div>' +
        '</div>';

    // create info window
    var infowindow = new google.maps.InfoWindow({
      content: contentString
    });

    // create a marker
    var marker = new google.maps.Marker({
      position: new google.maps.LatLng(40.6700, -73.9400),
      map: map,
      title: 'Uluru'
    });

    // when marker clicked, show info window
    google.maps.event.addListener(marker, 'click', function(){
      infowindow.open(map, marker);
    });
  }

  // load the map
  google.maps.event.addDomListener(window, 'load', initialize);

  // get the datasets to be shown
  var newData = []
  for (i = 0; i < <%=@datasetsShow%>.length; i++) {
    var fileName = <%=@datasetsShow%>[i].replace(/ /g, "-");
    // this is the path to the file
    newData.push("data/" + fileName + ".json");
    // this should get assed to the getJSON method, one at a time?
  };

  // load the datasets
  for (i = 0; i < newData.length; i++) {
    var data;
    // nyc-cool-roofs
    $.getJSON(newData[i], function(response) {
      // debugger
      data = response;
      for (var i = 0; i < data.data.length; i++) {
        var newLatLon = new google.maps.LatLng(data.data[i][13][1], data.data[i][13][2])
        var newMarker = new google.maps.Marker({
          position: newLatLon,
          map: map,
          neighborhood: data.data[i][8],
          street: data.data[i][10],
          street2: data.data[i][11],
          zip: data.data[i][12]
        });
      };
    });
  };

</script>

<!-- input box on top with list of diff datasets to visualize, upon
selection (click or change event, w/e) which will call the get json -->